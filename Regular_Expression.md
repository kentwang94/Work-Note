#Regular Expression
## 正则表达式

### 规则
[Read: Wiki](https://en.wikipedia.org/wiki/Regular_expression)

##### 常用规则
Mark | Example & Note
:--: | ------------
?    | `\d?` zero or one digit (\d equals to [0-9]
+    | `\d+` one or more digit(s)
*    | `\d*` zero or more digit(s)
\|   | `0|[1-9]` equal to `\d`

### 常用
[Source: CSDN](http://blog.csdn.net/ye1992/article/details/25286539)


##### 中文字符
这里是几个主要非英文语系字符范围:

+ __2E80～33FFh__：中日韩符号区。收容康熙字典部首、中日韩辅助部首、注音符号、日本假名、韩文音符，中日韩的符号、标点、带圈或带括符文数字、月份，以及日本的假名组合、单位、年号、月份、日期、时间等。
+ __3400～4DFFh__：中日韩认同表意文字扩充A区，总计收容6,582个中日韩汉字。
+ __4E00～9FFFh__：中日韩认同表意文字区，总计收容20,902个中日韩汉字。
+ __A000～A4FFh__：彝族文字区，收容中国南方彝族文字和字根。
+ __AC00～D7FFh__：韩文拼音组合字区，收容以韩文音符拼成的文字。
+ __F900～FAFFh__：中日韩兼容表意文字区，总计收容302个中日韩汉字。
+ __FB00～FFFDh__：文字表现形式区，收容组合拉丁文字、希伯来文、阿拉伯文、中日韩直式标点、小符号、半角符号、全角符号等。

> 比如需要匹配所有中日韩非符号字符,那么正则表达式应该是`^[/u3400-/u9FFF]+$` 理论上没错, 可是我到msn.co.ko随便复制了个韩文下来, 发现根本不对, 诡异再到msn.co.jp复制了个'お', 也不得行..
> 
> 然后把范围扩大到`^[/u2E80-/u9FFF]+$`, 这样倒是都通过了, 这个应该就是匹配中日韩文字的正则表达式了, 包括我們臺灣省還在盲目使用的繁體中文。而关于中文的正则表达式, 应该是`^[/u4E00-/u9FFF]+$`, 和论坛里常被人提起的`^[/u4E00-/u9FA5]+$`很接近。
> 需要注意的是论坛里说的`^[/u4E00-/u9FA5]+$`这是专门用于匹配简体中文的正则表达式, 实际上繁体字也在里面, 我用测试器测试了下'中華人民共和國', 也通过了, 当然, `^[/u4E00-/u9FFF]+$`也是一样的结果。
 
##### 常用匹配
+ 双字节字符(包括汉字在内)：`[^x00-xff]`

> 评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1） 

+ 空白行：`ns*r` 

> 评注：可以用来删除空白行 

+ 首尾空白字符：`^s*|s*$` 

> 评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式

+ Email地址：`w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*`

+ 网址URL：`[a-zA-z]+://[^s]*`

> 评注：网上流传的版本功能很有限，上面这个基本可以满足需求 

+ 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$ 

+ 国内电话号码：d{3}-d{8}|d{4}-d{7} 

> 评注：匹配形式如 0511-4405222 或 021-87888822 

+ 腾讯QQ号：[1-9][0-9]{4,} 

+ 中国邮政编码：[1-9]d{5}(?!d) 

+ 中国身份证：d{15}|d{18}

> 评注：中国的身份证为15位或18位，但验证很有限

+ ip地址：d+.d+.d+.d+

> 评注：验证很有限，1000.1000.0.0一样生效

+ 匹配特定数字： 
	- `^[1-9]d*$`			//匹配正整数 
	- `^-[1-9]d*$`		//匹配负整数 
	- `^-?[1-9]d*$`		//匹配整数 
	- `^[1-9]d*|0$`		//匹配非负整数（正整数 + 0） 
	- `^-[1-9]d*|0$`		//匹配非正整数（负整数 + 0） 
	- `^[1-9]d*.d*|0.d*[1-9]d*$`
		//匹配正浮点数 
	- `^-([1-9]d*.d*|0.d*[1-9]d*)$`
		//匹配负浮点数 
	- `^-?([1-9]d*.d*|0.d*[1-9]d*|0?.0+|0)$`
		//匹配浮点数 
	- `^[1-9]d*.d*|0.d*[1-9]d*|0?.0+|0$`
		//匹配非负浮点数（正浮点数 + 0） 
	- `^(-([1-9]d*.d*|0.d*[1-9]d*))|0?.0+|0$`
		//匹配非正浮点数（负浮点数 + 0） 

+ 限定英文字符： 
	- `^[A-Z]+$`			//26个大写字母 
	- `^[a-z]+$`			//26个小写字母
	- `^[A-Za-z0-9]+$`	//数字、26个大小写 
	- `^w+$`				//数字、26个大小写、下划线 

 
##### 其他应用
1. 计算字符串的长度（一个双字节字符长度计2，ASCII字符计1） 

```
String.prototype.len=function() {
  return this.replace([^x00-xff]/g,"aa").length;
} 
```

2. javascript中没有像vbscript那样的trim函数，我们就可以利用这个表达式来实现

```javascript
String.prototype.trim = function() { 
  return this.replace(/(^s*)|(s*$)/g, ""); 
}
```

3. 应用：利用正则表达式分解和转换IP地址

```
function IP2V(ip) {//IP地址转换成对应数值 
  re=/(d+).(d+).(d+).(d+)/g //匹配IP地址的正则表达式 
  if(re.test(ip)) { 
    return RegExp.$1*Math.pow(255,3))+RegExp.$2*Math.pow(255,2))+RegExp.$3*255+RegExp.$4*1 
  } else { 
    throw new Error("Not a valid IP address!")
  } 
}
```

4. 应用：从URL地址中提取文件名的javascript程序 

```javascript
s = "http://www.9499.net/page1.htm"; 
s = s.replace(/(.*/){0,}([^.]+).*/ig,"$2");//page1.htm
```
